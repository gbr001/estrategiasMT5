#include <Math\Stat\Math.mqh>
int MAs[14] = {5,25,55,75,100,125,150,200,250,300,350,400,450,500};
int grid_size = 10;
double grid_distances[10] = {0.003,0.0035555555555555557,0.004111111111111111,0.004666666666666666,0.005222222222222222,0.0057777777777777775,0.006333333333333333,0.006888888888888889,0.0074444444444444445,0.008};
double grid_coefficients[10] = {1.0,1.4444444444444444,1.8888888888888888,2.333333333333333,2.7777777777777777,3.2222222222222223,3.6666666666666665,4.111111111111111,4.555555555555555,5.0};
void fill_arays( double &features[]) {
   double pr[], ret[];
   ArrayResize(ret, 1);
   for(int i=ArraySize(MAs)-1; i>=0; i--) {
       CopyClose(NULL,PERIOD_CURRENT,1,MAs[i],pr);
       double mean = MathMean(pr);
       ret[0] = pr[MAs[i]-1] - mean;
       ArrayInsert(features, ret, ArraySize(features), 0, WHOLE_ARRAY); }
   ArraySetAsSeries(features, true);
}

double catboost_model(const double &features[]) { 
    unsigned int TreeDepth[21] = {6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6};
    unsigned int TreeSplits[126] = {113, 33, 86, 46, 2, 39, 115, 49, 79, 23, 1, 43, 105, 21, 94, 73, 15, 17, 56, 86, 63, 27, 106, 100, 114, 85, 45, 62, 57, 77, 95, 16, 87, 54, 24, 35, 115, 51, 99, 37, 12, 82, 40, 78, 103, 6, 60, 18, 71, 88, 55, 102, 65, 112, 34, 95, 20, 66, 111, 32, 97, 59, 101, 8, 74, 4, 47, 115, 92, 5, 50, 64, 58, 110, 108, 44, 26, 11, 105, 98, 64, 36, 93, 107, 104, 70, 31, 0, 41, 75, 96, 84, 68, 7, 30, 53, 54, 76, 109, 9, 38, 28, 89, 44, 69, 61, 19, 14, 72, 3, 48, 91, 25, 83, 42, 90, 80, 52, 10, 22, 81, 67, 85, 29, 45, 13};
    unsigned int BorderCounts[14] = {6, 6, 5, 4, 14, 8, 5, 16, 9, 9, 9, 7, 8, 10};
    float Borders[116] = {-0.00132891012f, -0.00130912801f, -0.0011838628f, -0.000621611835f, -2.74884369e-05f, 0.000964628533f, -0.00289954664f, -0.00216957461f, -0.000723670819f, 0.000405168423f, 0.000677442818f, 0.000802555936f, -0.00353224808f, -0.00334624876f, 0.00177625194f, 0.00182217243f, 0.00529939588f, -0.00195735134f, -0.00147733861f, -0.00123768649f, 0.00570265017f, -0.00754062412f, -0.00310306763f, -0.00250189425f, -0.0019426127f, -0.00164367247f, -0.000395929848f, -0.000241470072f, -9.41729959e-05f, 0.00262407213f, 0.00317036128f, 0.00573044503f, 0.00593015738f, 0.00797532592f, 0.0145293865f, -0.0105301514f, -0.002598427f, -0.00240231981f, -0.00207561883f, -0.0015346877f, 0.00300882966f, 0.0057513006f, 0.0129227638f, -0.00484573422f, 0.00330906827f, 0.00371454051f, 0.00623491872f, 0.016553672f, -0.00247853994f, 0.0021134261f, 0.00247470126f, 0.00295996526f, 0.0037089265f, 0.00396162691f, 0.00410804385f, 0.00425411388f, 0.00467723096f, 0.00479961187f, 0.00495896675f, 0.00520757027f, 0.00591404969f, 0.00799477473f, 0.0125505924f, 0.0184370354f, -0.00199382915f, 0.00275196135f, 0.00483184634f, 0.0104820197f, 0.0110861119f, 0.0142109729f, 0.0146908704f, 0.0235302467f, 0.0251749661f, -0.00761925243f, 0.000667486049f, 0.00154285086f, 0.00208667852f, 0.00247729803f, 0.0141796106f, 0.0144193713f, 0.0183174163f, 0.0260664765f, -0.00436911639f, -0.00228532031f, 0.0155075956f, 0.0158221126f, 0.0167765636f, 0.0177137181f, 0.0181832127f, 0.0288851261f, 0.0303933807f, -0.00426930236f, 0.00096018496f, 0.00478788f, 0.0184653085f, 0.0298903063f, 0.0308375172f, 0.0325009227f, 0.00632031262f, 0.00755500328f, 0.00764144398f, 0.0201864354f, 0.0256502107f, 0.0270600244f, 0.0302863903f, 0.0358044133f, -0.00863102078f, 0.00591207528f, 0.00907658227f, 0.0115175955f, 0.0151083143f, 0.017240176f, 0.0185793564f, 0.034278594f, 0.0362461209f, 0.0375000201f};

    /* Aggregated array of leaf values for trees. Each tree is represented by a separate line: */
    double LeafValues[1344] = {
        -0.001353413448446475, 0, 0, 0, -0.01126874214607591, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001190792094562026, 0, 0, 0, -0.009977346161634227, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.004769240614302247, 0, 0.01126874214607591, 0, 0, 0, 0, 0, -0.003894647284461988, 0, 0.001251628463807801, 0, -0.001466034165716335, 0.01713080501327057, -0.02605962242265827, 0.03441645745238457, -0.003059355059229381, 0, 0.008098008979819835, 0, -0.002787133933823097, 0, 0.01126874214607591, 0, 0.002032946756302429, 0, 0.00301668307682954, 0, -0.007178397771023406, -0.01462926070478541, -0.00961901221623024, 0.01197703014990784,
        -0.002069436251231707, 0, 0.01127559136096098, 0, 0, 0, 0, 0, 0.006904854499310184, 0, 0, 0, 0, 0, 0, 0, -0.0009443962136436137, 0, 0, 0, 0, 0, 0, 0, 0.001190502868475019, 0, 0, 0, 0, 0, 0, 0, -0.001779772833397308, 0, -0.01095626743373074, 0, 0, 0, 0, 0, -0.003865329755846762, 0, -0.002638709195218318, 0, 0, 0, -0.001236182575037327, 0.02737582914287451, -0.0001094913306338856, 0, -0.006215555446029386, 0, 0, 0, -0.01711174164843787, 0, -0.007604824667866271, 0, 0.0006662996332479516, 0, 0, 0, -0.006927021394922885, 0.03374926779049171,
        0.000868555992294421, 0, -0.002591688287559056, 0, 0, 0, 0, 0, -0.01070055941212322, 0, -0.001239835178578593, 0, 0, 0, -0.01047612184915892, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.02591663901661805, 0, 0, 0, 0, 0, 0, 0, -0.01054134909886347, 0, 0, 0, 0, 0, 0, 0, -0.002285308691909896, 0, 0, 0, -0.003018981088431385, 0, 0, 0, -0.02649885539248821, 0, 0, 0, 0, 0, 0, 0, -0.0005925068297139773, 0, 0, 0, -0.007049549323547145, 0.03510757985254648,
        -0.0009834711695021717, 0, 0, 0, 0, 0, 0, 0, -0.02980488558553309, 0, 0, 0, 0, 0, 0, 0, -0.002421228251829488, -0.0005460909912376257, 0, 0, 0, 0, 0, 0, -0.003943348022645496, 0.003484650351512696, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001373753964053204, -0.006506199836037927, -0.009755880095908267, -0.006793233471885328, 0, 0, 0, 0, -0.00492825041831048, 0.001312463986474541, -0.02087527899244267, -0.007465042730116897, 0, 0.0171481898479598, 0, 0.008605312718173634,
        -0.002613219769459641, 0, 0, 0, 0.002716331017811366, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.982229985779435e-05, 0, 0, 0, 0.005687828121378753, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.004377659011149953, 0, -0.01269409701049418, 0, -0.005179325887832204, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001117022955161059, 0, -0.009627809744549982, 0, 0.001025666173050883, 0, 0.001248817180111043, 0, 0, 0, 0, 0, 0.01444279204802886, 0, -0.009047255515874842, 0.01960919186323663,
        0.001510763000250345, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001407384485542233, 0, 0, 0, 0.00040060186253145, 0, 0, 0, -0.004930166758428871, 0, 0, 0, -0.02560281711203596, 0, 0, 0, -0.005487382083261104, 0, -0.0003396344318767005, 0, 0, 0, 0, 0, 0.001533467063459996, 0, 0.001391883292364336, 0, -0.005536581278310081, 0.002231497993626908, -0.00972960966882648, 0.01160637698825647,
        -0.0004888788179819226, 0, 0, 0, 0, 0, 0, 0, -0.003904559470888359, 0, 0, 0, 0, 0, 0, 0, -0.001021688601685138, 0, 0, 0, 0, 0, 0, 0, -0.0137665734415821, 0, 0.0001175569005533334, 0, 0, 0, 0, 0, -0.006044386614167526, 0, 0.0001489359050638385, 0, -0.002536939224158624, 0, -0.02350041538661269, 0, -0.004536370556397292, 0, -0.007584403720622175, 0, 0.009625710596591118, 0, -0.006654569829560397, 0, 0.003964999523688497, 0, -0.01673449073552622, 0, 0.0008844026685050504, 0, 0.003077032354386481, 0, -0.005416019949443145, 0, 0.002183064113953896, 0, -0.00702056720642229, 0, -0.002050650240877946, 0.03436986389032679,
        -0.00360989615301927, 0.0001247682716177795, -0.01671481164533119, 0, 0, 0, 0, 0, -0.0004257142634426664, 0.00400237931298456, -0.02883696981258028, 0, 0, 0, 0, 0, -0.01957817361314649, -0.01483326817311784, 0.0211629784174023, -0.01092189987757382, 0, 0, 0.01139466588335554, 0, -0.002537912760322049, 0.004047466158283241, -0.01691116652126353, -0.009727826320145032, 0, 0, 0, 0.0114819483655712, -0.003216981601806718, 0.02348910419169651, 0, 0, 0, 0, 0, 0, -0.00441839667382106, -0.002610959677703584, -0.01689552674399585, 0, 0, 0, 0, 0, 7.286093073907268e-05, 0.001548383337814216, 0.01145853014075214, 0.00162590606717219, 0, 0, 0.01733205798897885, 0.01471305558527113, 0.007859254829442046, 0.003068328251614058, -0.005286163471479902, -0.008632594388001874, 0, 0, -0.01117747258761395, -0.0003386792628549306,
        -0.002862824048226747, 0, 0, 0, 0.005329916628667277, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.005470497858950644, 0, 0, 0, 0.001298043081700207, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0221575165624383, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.004866878114242963, 0, 0, 0, -0.0004105358953570726, 0, -0.01275174168981766, 0, 0, 0, 0, 0, 0, 0, -0.001914944451991398, 0.01068126229614987,
        -0.002846280152801215, 0, 0, 0, -0.0002585795385247468, 0, 0, 0, -0.0002641797985926995, 0, 0, 0, -0.00444590787533179, 0, 0, 0, 0.007391089865598006, 0, 0, 0, -0.01705120910314455, 0, 0, 0, -0.001344087323961607, 0, 0.0003213881533266664, 0, -0.002613559553727325, 0, 0, 0, -0.004464364660985388, 0, 0, 0, 0.002484395394067777, 0, 0, 0, 0.001865433653083203, 0, 0, 0, 0.000737019782166101, 0.008805309777501984, 0, 0, -0.01119330296919901, 0, 0, 0, 0, 0, 0, 0, -0.006833281229076034, 0, -0.007834117622822649, 0, -0.006748211877706538, -0.00548625712472391, 0.01392900401511062, 0.01096137485221076,
        -0.001788660387483534, 0, 0.005974868620836711, 0, 0, 0, 0, 0, -0.0009652131289298981, 0, -0.006134334422198834, 0, 0, 0, 0, 0, -0.004365513585206517, 0, 0.002743102699087507, 0, 0.0002864492518677964, 0, 0.001023001970856473, 0, -0.00315466423325118, 0, -9.390002751982105e-05, 0, -0.01459037198635035, 0, -0.009346440713549292, 0.02477005447624266, -0.000999921253788658, 0, 0, 0, 0, 0, 0, 0, -0.003346260162376031, 0, 0.01270893923677277, 0, 0, 0, 0, 0, -0.007092055186584474, 0, 0.007191797555133722, 0, 0.0002348156734439997, 0, -0.0006626441434575192, 0, -0.003705098680863285, 0, 0.002975818523472112, 0, -0.007773678584958711, 0, -0.007719901743525954, 0.01374316606049613,
        -0.00226534906788266, 0, 0, 0, 0.004306130783669707, 0, 0, 0, -0.002513452304114178, 0, 0, 0, -0.0007317582277012015, 0, 0, 0, 0.01137690673780114, 0, 0, 0, 0, 0, 0, 0, -0.01113346302871009, 0, 0, 0, 0, 0, 0, 0, 0.0001197610686717267, 0, 0, 0, -0.006619590308520087, 0, 0, 0, -0.004095446337298385, 0, 0, 0, -0.009554476770917818, 0, 0, 0, 0.0001985890090050965, 0, 0, 0, -0.001580475246474814, 0.003395567316814218, 0.02880814729182229, 0.0341043822290516, 0.003204885134785815, 0, 0, 0, -0.0009584510757258879, -0.0006160852799953237, 0.01957517585188771, 0.02358213460574395,
        -0.002297347461938668, 0.006989500890516203, 0, 0, -0.004377067378135392, -0.009806691333845565, 3.956015989598679e-05, -0.006537143547527523, -0.002554539666596612, -0.00970950397234484, 0, 0, -0.01108302416599679, -0.01710431492531585, 0, 0.0003709597509140781, -0.006795230216470279, 0.006942162492329479, 0, 0, -0.00854412714181183, -0.001498332585138877, -0.002689066602439733, 0.003068867450985682, 0.007432504729050593, 0.005743399302349661, 0, 0, -0.01258213599046126, 0.003294630133464419, -0.00480153978028772, -0.0006239928437696938, 0.001343476361511799, 0.00393372989044203, 0, 0, 0.0120598925779353, 0, -0.001199811297071784, -0.008109427672635956, 0.006279268339007282, -6.161350830669554e-05, 0, 0, 0.01141243984521793, 0, 0, 0.01719105356406626, -0.005108344597894087, -0.004468265533090157, 0, 0, -0.004762502654844471, -0.002500636356571204, 0.008172458435610886, 0.002175339478864791, -0.002554634609350783, 0.004751919596304955, 0, 0, -0.01379415061568807, 0.0006842118299940106, 0.001633367414401588, -0.004396617824682447,
        -0.00043140397363658, 0, 0, 0, 0.001412022956131005, 0, 0, 0, -0.00799709593583724, 0, 0, 0, -0.001854928210488285, 0, 0.002115242861785976, 0, 0, 0, 0, 0, 0.01148519976228581, 0, -0.0110580397102074, 0, 0, 0, 0, 0, -0.002288627615772795, 0, -0.00067597671673881, 0, -0.008355159033949596, 0, 0.01272912697794153, 0, -0.01427186663326015, 0, -0.01657147469255932, 0, -0.01689444138048532, 0, 0.01721586874208476, 0, -0.003033765089664054, 0, -0.001052593951177624, 0, 0, 0, 0.00678956586033492, 0, -0.02343950460122738, 0, -0.006295364187023127, 0, 0, 0, 0.01134366069856981, 0, -0.001516973976158124, 0, -0.002331870945707982, 0.03354949143026714,
        -0.001494770865850736, 0, 0, 0, -0.02065336080939351, 0, 0, 0, -0.001719413450794269, 0, 0, 0, -0.01580054305225685, 0, 0, 0, 0.0001926154661429969, 0, 0, 0, -0.02067556851100099, 0, 0, 0, 0.0001710758335369669, 0, 0, 0, 0.003631957772644054, 0, 0, 0, -0.005250041752542793, 0, -0.001928877305001498, 0, 0.007088921331412425, 0, 0, 0, -0.002077158611195904, 0, 0.0004614963048510381, 0, 0.003351522426196462, 0, -0.01097873189887337, 0, 0.01116881242173066, 0, -0.01330262810177407, 0, -0.00139419542675409, 0, -0.006314242057368675, 0.02832392590485048, 0.001091665037595691, 0.01157062062614561, -0.00727649002394972, -0.02145442802698277, 0.0008825030846174393, -0.01096912530654331, -0.008423425515245305, 0.001899025213300955,
        -0.003387517223982144, 0, 0.01037376973887149, 0, 0, 0, 0, 0, -0.002357949009506617, 0, -0.02524291947593707, 0, 0, 0, 0, 0, 0.009365683358279659, 0, 0, 0, 0, 0, 0, 0, -0.00687574831569498, 0, 0, 0, 0, 0, 0, 0, -0.004306179204497095, 0, -0.01906547517664618, 0, 0.01125473913133315, 0, 0.01363097774521108, 0, 0.002753845014445071, 0, -0.009195516637606356, 0, 0.009023850052238947, 0, -0.003753648630244316, 0, 0.01037033446859287, 0, 0.006341834987051877, 0, 0.01123362827912117, 0, 0.002960325953911688, 0, 0.0001986722803676537, 0, 0.007403546438098877, 0, 0.01062359447925285, 0, -0.008170586914259623, 0.01076268759389596,
        -0.000956601804867634, 0, -0.009455810164261638, 0.02112436984747472, 0.007218026354544867, 0, -0.004799341791830587, -0.0117221816852532, 0.002021276692840674, 0, -0.002401461662099281, 0.01140324266055011, -0.009762429054135201, 0, -0.006448181952488779, -0.01099112028292426, -0.006359790186168315, 9.26068632245439e-05, -0.009615476529333072, 0.000732871711021599, 0.01031204756582514, 0, -0.002048189480991307, -0.006848938879520057, -0.001430764480080264, 0, -0.006728922032972827, 0.003713476128816855, 0, 0, 0.005577135190786078, -0.00280466689661333, -0.01797094372766941, 0, 0.02137772248678742, 0, 0, 0, -0.0167390410391931, 0, 0.002103983900024933, 0, 0.01154883725579338, -0.01109942425806309, -0.01696293491911236, 0, 0.01144890111660552, 0, -0.005173990765640124, 0.009047995777755034, -0.004657877997070315, 0.005164488906497437, -0.02044165902898368, 0, -0.00797495636467036, -0.0002677075883565478, -0.004357852177734356, 0.004758014102685547, -0.0068348251309276, 0.001176544761426247, -0.01024843016307976, 0, 0.003718389605677126, -0.002493610157408314,
        -0.00162695501233532, 0, -0.002846599711139775, 0, 0, 0, 0.01134154538587392, 0, 0.006061703815898664, 0, -0.001482656840700545, 0, -0.01112133757993973, 0, 0.0005224883114727573, 0, -0.005058360092730405, 0, 0.002536824405641614, 0, 0, 0, 0.01722843194490614, 0, 0.006197000423796223, 0, 0.005545654482431372, 0, 0, 0, -0.003219576708033658, 0, 0.002098321449113399, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0108465838115265, 0, -0.00259245799270559, 0, -0.0003208989097942647, 0, 0, 0, 0, 0, -0.01083228418154463, 0, 0.001533296903089501, 0, 0, 0, -0.008345804761802146, 0.01147969226086845,
        -0.0001047624766298606, 0, 0.000479905997586096, 0, -0.009108402759221632, 0, -0.0007442441393419827, 0, -0.0007959198306758624, 0, -0.005016544040557425, 0, 0.0017564788467276, 0, 0.004462779836588593, 0, -0.006738229323627805, 0, -0.007396976063141812, 0, -0.01400397474413898, 0, -0.01244300111342477, 0, 0.01545315681979933, 0, -0.008520427020810189, 0, 0.003240677782991158, 0, -0.002143576086830766, 0, -0.01106327773122355, 0, -0.01102920701820551, 0, 0.01138010421556704, 0, -0.005611076276280357, 0, 0.001909127063962433, 0, 0.005393170521600874, 0, -0.006198303097423589, 0, -0.003842265442550825, 0, -0.01093131553195189, 0, 0.01146702320707832, 0, 0.004466894228883028, 0, 0.00397275360122612, 0, -0.03107633175552554, 0, -0.005296095962453061, 0, -0.002251671985194166, 0.01855217807155479, -0.001689747323847725, 0.0120357683500499,
        -0.001369188936205065, 0, 0, 0, 0, 0, 0, 0, -0.01130761717757993, 0, 0, 0, 0, 0, 0, 0, 0.004001789670011612, 0, 0, 0, 0, 0, 0, 0, 0.01735762347005443, 0, 0, 0, 0, 0, 0, 0, -0.005010274115941023, 0, 0, 0, 0, 0, 0, 0, 0.001695406885742575, 0.003664543174604052, 0, 0, -0.002010228369859306, 0.0005963767110372396, 0.01102665164911272, 0.009916675704622048, -0.003356458541295187, 0, 0, 0, 0, 0, 0, 0, -0.0006542873233070284, 0.009320505637115692, 0, 0, -0.01135195522979295, -0.006596109948211099, 0.005088332305744504, 0.02019704680590972,
        -0.002301819022555889, 0, -0.01073327980570279, 0, -0.01594287262489812, 0, 0.0008147387465070878, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.007707698179636396, 0, 0.01709062035249866, 0, 0, 0, 0.01139229886853995, 0, 0.005956189448414353, 0, 0, 0, 0, 0, 0, 0, -0.002211446857407183, 0, -0.003761373994068974, 0, -0.01487191584902663, 0, -0.003502565234514995, 0, -0.003782957969703791, 0, 0, 0, -0.0108748114714142, 0, 0, 0, 0.004224401845545222, 0, 0.004060607021025442, 0, -0.00578220719350563, 0, 0.002443017138944614, 0, -0.0009532057429728521, 0, 0.008266074919766662, 0, 0.008409043509969938, 0, -0.006757426656477103, 0.01119256422464892
    };
    

return ApplyCatboostModel(features, TreeDepth, TreeSplits , BorderCounts, Borders, LeafValues); } 

double ApplyCatboostModel(const double &features[],uint &TreeDepth_[],uint &TreeSplits_[],uint &BorderCounts_[],float &Borders_[],double &LeafValues_[]) {
    uint FloatFeatureCount=ArrayRange(BorderCounts_,0);
    uint BinaryFeatureCount=ArrayRange(Borders_,0);
    uint TreeCount=ArrayRange(TreeDepth_,0);
    bool     binaryFeatures[];
    ArrayResize(binaryFeatures,BinaryFeatureCount);
    uint binFeatureIndex=0;
    for(uint i=0; i<FloatFeatureCount; i++) {
       for(uint j=0; j<BorderCounts_[i]; j++) {
          binaryFeatures[binFeatureIndex]=features[i]>Borders_[binFeatureIndex];
          binFeatureIndex++;
       }
    }
    double result=0.0;
    uint treeSplitsPtr=0;
    uint leafValuesForCurrentTreePtr=0;
    for(uint treeId=0; treeId<TreeCount; treeId++) {
       uint currentTreeDepth=TreeDepth_[treeId];
       uint index=0;
       for(uint depth=0; depth<currentTreeDepth; depth++) {
          index|=(binaryFeatures[TreeSplits_[treeSplitsPtr+depth]]<<depth);
       }
       result+=LeafValues_[leafValuesForCurrentTreePtr+index];
       treeSplitsPtr+=currentTreeDepth;
       leafValuesForCurrentTreePtr+=(1<<currentTreeDepth);
    }
    return 1.0/(1.0+MathPow(M_E,-result));
    }